# Emblem Vault Solidity Test Suite Results

-  ## Balance
    - <span style="color:green">✔</span> should deploy storage
    - <span style="color:green">✔</span> storage should be owned by deployer
    - <span style="color:green">✔</span> should deploy balance
    - <span style="color:green">✔</span> uninitialized storage should reflect current version of zero (48ms)
    - <span style="color:green">✔</span> adding balance by non owner reverts (114ms)
    - <span style="color:green">✔</span> uninitialized storage can not add balance (220ms)
    - <span style="color:green">✔</span> initialized storage should reflect current version (52ms)
    - <span style="color:green">✔</span> promote version should prevent balance from working (146ms)
    - <span style="color:green">✔</span> should revert with invalid signature (213ms)
    - <span style="color:green">✔</span> initialized storage and valid signature can add single balance (538ms)
    - <span style="color:green">✔</span> can add multiple balances (646ms)
    - <span style="color:green">✔</span> can hash balances in contract
    - <span style="color:green">✔</span> hashed balances in contract matched client hashed balances
    - <span style="color:green">✔</span> hashed balance object in contract matched client hashed balance object
    - <span style="color:green">✔</span> hashed balance object with 10 balances matches (49ms)
    - <span style="color:green">✔</span> adding witness by non owner should revert (114ms)
    - <span style="color:green">✔</span> owner should be able to add witness (153ms)
    - <span style="color:green">✔</span> removing witness by non owner should revert (151ms)
    - <span style="color:green">✔</span> owner should be able to remove witness (210ms)
    - <span style="color:green">✔</span> signature from witness with used nonce should revert (502ms)
    - <span style="color:green">✔</span> should get all tokenIds for nftAddress (769ms)
    - <span style="color:green">✔</span> should get single tokenId for nftAddress by index (1163ms)
    - <span style="color:green">✔</span> should get tokenIds from map (1069ms)
    - <span style="color:green">✔</span> should get tokenIds from map by index (1349ms)

-  ## Burn tokens
    - <span style="color:green">✔</span> should burn directly via vault contract (199ms)
    - <span style="color:green">✔</span> should not claim via handler without permission (176ms)
    - <span style="color:green">✔</span> should claim via handler with permission (318ms)
    - <span style="color:green">✔</span> should not be able to mint previously claimed vault (265ms)
    - <span style="color:green">✔</span> unminted should not return claimed (106ms)
    - <span style="color:green">✔</span> burnt via emblem vault should not return claimed (266ms)

-  ## Claimed
    - <span style="color:green">✔</span> should deploy storage
    - <span style="color:green">✔</span> storage should be owned by deployer
    - <span style="color:green">✔</span> should deploy claimed
    - <span style="color:green">✔</span> should transfer ownership to deployer (55ms)
    - <span style="color:green">✔</span> uninitialized storage should reflect current version of zero (40ms)
    - <span style="color:green">✔</span> uninitialized claimed can not add to legacy claim (94ms)
    - <span style="color:green">✔</span> initialized storage should reflect current version (54ms)
    - <span style="color:green">✔</span> initialized storage can add legacy claim (362ms)
    - <span style="color:green">✔</span> should not be legacy claimed when legacy claimed root not stored (57ms)
    - <span style="color:green">✔</span> should be claimed by ZERO ADDRESS when not minted (48ms)
    - <span style="color:green">✔</span> should be claimed by type of "unknown" when not minted (49ms)
    - <span style="color:green">✔</span> should be claimed when legacy (328ms)
    - <span style="color:green">✔</span> should verify valid merklescript (79ms)
    - <span style="color:green">✔</span> should verify valid merkle proof (80ms)
    - <span style="color:green">✔</span> should not verify invalid merkle proof (77ms)
    - <span style="color:green">✔</span> should verify valid complex merkle proof (81ms)

-  ## Emblem Vault
    - <span style="color:green">✔</span> should deploy vault (57ms)
    - <span style="color:green">✔</span> should not allow minting if not owned (58ms)
    - <span style="color:green">✔</span> should allow minting if owned (161ms)
    - <span style="color:green">✔</span> should serialize and hash locally (58ms)
    - <span style="color:green">✔</span> should verify signature and hash in handler (187ms)
    - <span style="color:green">✔</span> should not be witnessed if signer not a witness (187ms)
    - <span style="color:green">✔</span> should be witnessed if signer is a witness (223ms)
    - <span style="color:green">✔</span> should get correct address from signature (197ms)
    - <span style="color:green">✔</span> should fail to mint with signature if signer is not a witness (510ms)
    - <span style="color:green">✔</span> should mint with signature if signer is a witness (445ms)
    - <span style="color:green">✔</span> should mint with signed price (499ms)

-  ## Vault Handler
    - <span style="color:green">✔</span> should deploy handler (58ms)
    - <span style="color:green">✔</span> should transfer vault ownership to handler (66ms)

-  ## NFTradeV2 (Single-Tenant)
    -  ## NFTradeV2 NFT
        - <span style="color:green">✔</span> has correct name
        - <span style="color:green">✔</span> can mint (192ms)
        - <span style="color:green">✔</span> users have expected balances (210ms)
    -  ## NFTradeV2 Trade
        - <span style="color:green">✔</span> reflects correct version
        - <span style="color:green">✔</span> cannot place offer without approval
        - <span style="color:green">✔</span> cannot offer un-owned token
        - <span style="color:green">✔</span> can place offer after approval (214ms)
        - <span style="color:green">✔</span> cannot add erc20 token offer when canOfferERC20 off (52ms)
        - <span style="color:green">✔</span> cannot add erc20 token offer before allowance
        - <span style="color:green">✔</span> can add erc20 token offer after allowance (179ms)
        - <span style="color:green">✔</span> can withdraw offer (238ms)
        - <span style="color:green">✔</span> rejecting another users offer fails (176ms)
        - <span style="color:green">✔</span> can reject offer (272ms)
        - <span style="color:green">✔</span> cannot accept offer without approval (173ms)
        - <span style="color:green">✔</span> cannot accept erc20 offer without approval (174ms)
        - <span style="color:green">✔</span> can accept erc20 offer with approval (622ms)
        - <span style="color:green">✔</span> can withdraw erc20 offer (475ms)
        - <span style="color:green">✔</span> can reject erc20 offer (254ms)
        - <span style="color:green">✔</span> can accept offer after approval (666ms)
        - <span style="color:green">✔</span> cannot accept offer for un-owned nft (187ms)
        - <span style="color:green">✔</span> accepting offer removes all other offers (1263ms)
        - <span style="color:green">✔</span> can get outstanding offers placed (353ms)
        - <span style="color:green">✔</span> can get accepted offer for nft  (1004ms)
        - <span style="color:green">✔</span> accepting offer removes all outstanding offers for nft (774ms)
    -  ## NFTradeV2 Payment
        - <span style="color:green">✔</span> reflects correct token balances before trades
        - <span style="color:green">✔</span> toggles pay to make and accept offers
        - <span style="color:green">✔</span> can charge separate prices to make and accept offers
        -  ## Pay to make offer
            - <span style="color:green">✔</span> fails to add offer if trade contract not approved to spend
            - <span style="color:green">✔</span> fails to add offer if too broke (76ms)
            - <span style="color:green">✔</span> can make offer (266ms)
            - <span style="color:green">✔</span> bank receives fee (299ms)
        -  ## Pay to accept offer
            - <span style="color:green">✔</span> fails to accept offer if trade contract not approved to spend
            - <span style="color:green">✔</span> fails to accept offer if too broke (106ms)
            - <span style="color:green">✔</span> can accept offer (609ms)
            - <span style="color:green">✔</span> bank receives fee (698ms)
    -  ## NFTradeV2 Trade Types
        - <span style="color:green">✔</span> 2 separate nft contracts exist
        - <span style="color:green">✔</span> users have correct balances of nfts before trades
        - <span style="color:green">✔</span> can swap erc721 for erc721 (431ms)
        - <span style="color:green">✔</span> can detect erc1155 vs erc721 vs erc20
        - <span style="color:green">✔</span> can swap erc721 for erc1155 (440ms)
        - <span style="color:green">✔</span> can swap erc1155 for erc1155 (367ms)
        - <span style="color:green">✔</span> fails to accept offer if too broke (97ms)
        - <span style="color:green">✔</span> can accept offer (626ms)
        - <span style="color:green">✔</span> bank receives fee (671ms)
        - <span style="color:green">✔</span> can swap erc20 for erc721 (369ms)
        - <span style="color:green">✔</span> can swap erc20 for erc1155
    -  ## NFTradeV2 Percentage
        - <span style="color:green">✔</span> can calculate percentage of even
        - <span style="color:green">✔</span> can calculate percentage of odd
        - <span style="color:green">✔</span> can calculate 100%
        - <span style="color:green">✔</span> can calculate 1000%
        - <span style="color:green">✔</span> can calculate 0%
        - <span style="color:green">✔</span> can calculate % of single
        - <span style="color:green">✔</span> fails on attempt to calculate negative
            -  ## percentage fee for erc20 offer
                - <span style="color:green">✔</span> Percentage fees are paid when percentage fee for erc20 on (682ms)
                - <span style="color:green">✔</span> Percentage fees are not paid when percentage fee for erc20 off (443ms)
-  ## NFTradeV3 (Multi-Tenant)
    -  ## NFTradeV3 NFT
        - <span style="color:green">✔</span> has correct name
        - <span style="color:green">✔</span> can mint (628ms)
        - <span style="color:green">✔</span> users have expected balances (184ms)
    -  ## NFTradeV3 Trade
        - <span style="color:green">✔</span> reflects correct version
        - <span style="color:green">✔</span> cannot place offer without approval
        - <span style="color:green">✔</span> cannot offer un-owned token
        - <span style="color:green">✔</span> can place offer after approval (184ms)
        - <span style="color:green">✔</span> cannot add erc20 token offer when canOfferERC20 off (59ms)
        - <span style="color:green">✔</span> cannot add erc20 token offer before allowance
        - <span style="color:green">✔</span> can add erc20 token offer after allowance (163ms)
        - <span style="color:green">✔</span> can withdraw offer (239ms)
        - <span style="color:green">✔</span> rejecting another users offer fails (185ms)
        - <span style="color:green">✔</span> can reject offer (314ms)
        - <span style="color:green">✔</span> cannot accept offer without approval (172ms)
        - <span style="color:green">✔</span> cannot accept erc20 offer without approval (186ms)
        - <span style="color:green">✔</span> can accept erc20 offer with approval (538ms)
        - <span style="color:green">✔</span> can withdraw erc20 offer (209ms)
        - <span style="color:green">✔</span> can reject erc20 offer (279ms)
        - <span style="color:green">✔</span> can accept offer after approval (986ms)
        - <span style="color:green">✔</span> cannot accept offer for un-owned nft (216ms)
        - <span style="color:green">✔</span> accepting offer removes all other offers (871ms)
        - <span style="color:green">✔</span> can get outstanding offers placed (386ms)
        - <span style="color:green">✔</span> can get accepted offer for nft  (780ms)
        - <span style="color:green">✔</span> accepting offer removes all outstanding offers for nft (1023ms)
    -  ## NFTradeV3 Payment
        - <span style="color:green">✔</span> reflects correct token balances before trades
        - <span style="color:green">✔</span> toggles pay to make and accept offers
        - <span style="color:green">✔</span> can charge separate prices to make and accept offers
        -  ## Pay to make offer
            - <span style="color:green">✔</span> fails to add offer if trade contract not approved to spend
            - <span style="color:green">✔</span> fails to add offer if too broke (61ms)
            - <span style="color:green">✔</span> can make offer (278ms)
            - <span style="color:green">✔</span> bank receives fee (260ms)
        -  ## Pay to accept offer
            - <span style="color:green">✔</span> fails to accept offer if trade contract not approved to spend
            - <span style="color:green">✔</span> fails to accept offer if too broke (67ms)
            - <span style="color:green">✔</span> can accept offer (1149ms)
            - <span style="color:green">✔</span> bank receives fee (552ms)
    -  ## NFTradeV3 Trade Types
        - <span style="color:green">✔</span> 2 separate nft contracts exist
        - <span style="color:green">✔</span> users have correct balances of nfts before trades
        - <span style="color:green">✔</span> can swap erc721 for erc721 (538ms)
        - <span style="color:green">✔</span> can detect erc1155 vs erc721 vs erc20
        - <span style="color:green">✔</span> can swap erc721 for erc1155 (399ms)
        - <span style="color:green">✔</span> can swap erc1155 for erc1155 (366ms)
        - <span style="color:green">✔</span> can swap erc20 for erc721 (378ms)
        - <span style="color:green">✔</span> can swap erc20 for erc1155 (338ms)
    -  ## NFTradeV3 Percentage
        - <span style="color:green">✔</span> can calculate percentage of even
        - <span style="color:green">✔</span> can calculate percentage of odd
        - <span style="color:green">✔</span> can calculate 100%
        - <span style="color:green">✔</span> can calculate 0%
        - <span style="color:green">✔</span> can calculate % of single
        - <span style="color:green">✔</span> fails on attempt to calculate negative
            -  ## percentage fee for erc20 offer
                - <span style="color:green">✔</span> Percentage fees are paid when percentage fee for erc20 on (402ms)
                - <span style="color:green">✔</span> Percentage fees are not paid when percentage fee for erc20 off (363ms)
